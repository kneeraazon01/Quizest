{% extends "base/layout.html" %}
{% load static %}
{% block head %}
<style>
    * {
        font-family: 'Open Sans', sans-serif;
    }
    #test-setting{
        margin: 20px 0 10px 0;
        color: #757575 !important;
        font-size: 15px;
    }
    #test-setting h5{
        color: #313131;
        font-size: 16px;
    }
    #test-setting .rounded-pill{
        font-size: 12px;
        color: #979797 !important;
        background-color: #f4f5f7 !important;
        font-weight: 400;
    }
    .table thead th{
        color: #757575 !important;
        text-transform: uppercase;
        font-size: 15px;
    }
    .table td{
        font-size: 14px;
        color: #313131;
    }
    tbody i {
        font-size: 20px !important;
    }
</style>
{% endblock %}
{% block title %}Test Result{% endblock %}
{% block body %}


<div class="container my-5">
    <div class="d-flex justify-content-between">
        <h4>Test Result</h4>
        <p>Test ID: {{test.id}} 
            <a  data-bs-toggle="tooltip" data-bs-placement="top"  data-bs-html="true" title="Unique ID to be used when creating custom test">
                <i class="fa-solid fa-circle-info"></i>
            </a>
        </p>
    </div>
    <hr style="margin: 0; border:1px solid #03070b;">
    <div class="row align-items-center">
        {% if test.completion_status is False %}
        <div class="col-12 mt-1 mb-4">
            <h4>Resume Test &nbsp; &nbsp;<a href="{% url 'question' %}?test_id={{test_id}}"><i class="fa-regular fa-circle-play"></i></a></h4>
        </div>
        {% endif %}
        <div class="col-md-6">
            <span class="d-block text-dark">Your Score: {{your_score}}% <i class="fa-solid fa-square-full text-primary"></i></span>
            <span class="d-block text-dark">Average Score: {{average_score}}% <i class="fa-solid fa-square-full" style="color:#2f4050"></i></span>
            <div class="progress" style="height: 60px; background-color: ;">
                {% if equal is True %}
                <div class="progress-bar" role="progressbar" aria-label="Segment one" style="width: {{your_score}}%"
                aria-valuenow="{{your_score}}" aria-valuemin="0" aria-valuemax="100" style="background-color: #2f4050;"></div>
                {% endif %}
                {% if greater is True %}
                <div class="progress-bar" role="progressbar" aria-label="Segment one" style="width: {{your_score}}%"
                    aria-valuenow="{{your_score}}" aria-valuemin="0" aria-valuemax="100"></div>
                <div class="progress-bar"  style="background-color: #2f4050; width: {{difference}}%" role="progressbar" aria-label="Segment two"
                    aria-valuenow="{{average_score}}" aria-valuemin="0" aria-valuemax="100"></div>
                {% endif %}
                {% if greater is False %}
                <div class="progress-bar"  style="background-color: #2f4050;width: {{average_score}}%" role="progressbar" aria-label="Segment two"
                    aria-valuenow="{{average_score}}" aria-valuemin="0" aria-valuemax="100"></div>
                <div class="progress-bar" role="progressbar" aria-label="Segment one" style="width: {{difference}}%"
                    aria-valuenow="{{your_score}}" aria-valuemin="0" aria-valuemax="100"></div>
                {% endif %}
            </div>
        </div>
        <div class="col-md-6" id="test-setting">
            <h5>Test Settings</h5>
            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-start">
                    <div class="ms-2 me-auto">
                        <div>Mode</div>
                    </div>
                    {% if test.timed is True %}
                    <span class="badge bg-secondary rounded-pill">Timed</span> &nbsp;
                    {% endif %}
                    {% if test.tutor is True %}
                    <span class="badge bg-secondary rounded-pill">Tutor</span>
                    {% endif %}
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-start">
                    <div class="ms-2 me-auto">
                        <div>Question Pool</div>
                    </div>
                    <span class="badge bg-secondary rounded-pill">{{test.status}}</span>
                </li>
                <hr style="display: none;">
            </ul>
        </div>
    </div>
    <hr style="margin: 0; border:1px solid #03070b;">
    <div class="row mt-4">
        <div class="col-12">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">ID</th>
                        <th scope="col">Subjects</th>
                        <th scope="col">Systems</th>
                        <th scope="col">Topics</th>
                        <th scope="col">% Correct Others</th>
                        <th scope="col">Time Spent</th>
                        <th scope="col">Review</th>
                    </tr>
                </thead>
                <tbody class="table-group-divider text-dark">
                    {% for question in questionList %}
                    <tr style="padding: 10px 0 10px !important ;">
                        <th scope="row">
                        {% if question.is_omitted is True %}
                            <i class="fa-solid fa-circle-minus" style="color: blue;"></i>
                        {% elif question.is_correct is True %}
                            <i class="fa-solid fa-check " style="color: green;"></i>
                        {% elif question.is_correct is False %}
                            <i class="fa-solid fa-xmark" style="color: red;"></i>
                        {% else %}
                            Error
                        {% endif %}
                        </th>
                        <td>{{ forloop.counter }} - {{ question.question.id }}</td>
                        <td>{{ question.question.subject }}</td>
                        <td>{{ question.question.system }}</td>
                        <td>{{ question.question.topic }}</td>
                        <td>{{ question.correct_percentage }}%	</td>
                        <td>{{ question.time_taken }} sec</td>
                        <td>
                            <a href="{% url 'question' %}?test_id={{test.id}}&page={{forloop.counter}}">
                                <i class="fa-solid fa-chevron-right"></i>
                            </a>
                            
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}

{% block javascript %}

{% endblock %}